
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<script type="text/javascript" src="../../afb/"></script>
		<title>Unit 3 Lab 2: Tic-Tac-Toe, Page 2</title>
    </head> 
    
    <body>
        <div class="todo">
            ST EK List:<br />
            No EK's found
        </div>
    	<h2>Detecting  Wins and Ties</h2>
        <div class="todo">
	        <p>I made some edits to include the word "possible" more. I'm not sure I didn't make it more confusing. Need to look again another day. --MF, 6/13/18</p>
        </div>
		
		
        <div class="learn">
            <p><strong>On this page</strong>, you'll program your Tic Tac Toe project to detect and report wins and ties.</p>
        </div>
        
        <h3>Storing All the Ways to Win</h3>
		<p>
            To program a way to detect a win, we need to determine what counts as a win. We'll store each possible winning triple as a list of three position numbers (a <em>triple</em>).  For example, this winning triple could be represented as <img src="../../bjc-r/img/3-lists/{3,5,7}.png" alt="Geen Afbeelding" > because the win is in the 3<sup>rd</sup>, 5<sup>th</sup>, and 7<sup>th</sup> positions:<br />
            <img class="indent noshadow" src="../../bjc-r/img/3-lists/winning-combo-357.png" alt="Geen Afbeelding" ><br />
        </p>
        
        <div class="forYouToDo" id="first">
			<ol>
                <li><img class="inline" src="../../bjc-r/img/icons/talk-with-your-partner.png" alt="Geen Afbeelding"  />
                    <ol>
                        <li>How many winning triples are possible? </li>
                        <li>Write down each of the possible winning triples.</li>
                    </ol>
                </li>
            </ol>
        </div>
        
        <p>Next we'll create a list to store all of the possible winning triples so we can check it against the current state of the game stored by <var>board</var>.</p>
        
        <div class="forYouToDo">
			<ol start="2">
	            <li>Open your project <strong>U3L2-TicTacToe</strong> if it isn't open already.</li>
                <img class="imageRight" src="../../bjc-r/img/icons/save-mini.png" alt="Geen Afbeelding"  />
                <li>
                    Create a reporter that outputs a list of all possible winning triples. It will look something like this:<br />
                    <img class="indent" src="../../bjc-r/img/3-lists/winning-triples.png" alt="Geen Afbeelding" />
                </li>
            </ol>
        </div>
        
        <h3>Checking One Way to Win</h3>
        <p>We need a way to find out if a winning triple has actually happened. We can use <code>map</code> to check each position in one triple to see if either player has won with that triple. </p>
        
        <div class="endnote">
            <p>You learned about <code>map</code> in <a href="/bjc-r/cur/programming/3-lists/1-introduction-to-lists/4-mapping-over-list.html?topic=nyc_bjc%2F3-lists.topic&course=bjc4nyc.html&novideo&noassignment" >Unit 3 Lab 1 Page 4: Transforming Every List Item</a>.</p>
            <p>
                <code>Map</code> applies the function in the gray ring to each item in the input list, and it reports a list of all the results.<br />
                <img class="indent" src="../../bjc-r/img/3-lists/map-example-2.png" alt="Geen Afbeelding"  />
            </p>
            <p>Recall that the blank input slot in the function inside the gray ring is where one list item goes every time the function is performed.</p>
        </div>
        
        <div class="forYouToDo">
			<ol start="4">
                <li>Click <img src="../../bjc-r/img/1-introduction/green-flag_button.png" alt="Geen Afbeelding"  /> to start a new game. Play one game, <em>deliberately letting <strong>x</strong>  win</em>. </li>
                <li>
                    Then build this expression, and see what it reports:<br />
                    <img class="indent" src="../../bjc-r/img/3-lists/map-item-board.png" alt="Geen Afbeelding" ><br />
                    <div class="endnote">
                        <a href="#hint-map-item" data-toggle="collapse" >How does <code>map</code> work here?</a>
                        <div id="hint-map-item" class="collapse">
                            <p>This <code>map</code> expression works the same way as the <code>join</code> example above, but it's a little more complex to think about. As before, <code>map</code> inserts each list item into the blank space in the function inside the gray ring, and it reports a list of the results.</p>
                            <p>But here, the function in the gray ring is <code>item ( ) of (</code><var>board</var><code>)</code>, so <code>map</code> checks items 1, 2, and 3 of the list stored in the <var>board</var> variable, and it reports a list of what is in those three positions (X, O, or Empty).</p>
                            <p>
                            	If you can't see what's inside the <var>board</var> variable, be sure its box is checked in the Variables palette and expand its watcher to see its list items as in the picture below.<br />
                                <img class="indent noshadow" src="../../bjc-r/img/3-lists/ttt-board-var.png" alt="Geen Afbeelding"  />
                                <img class="indent" src="../../bjc-r/img/3-lists/map-item-board-reporting.png" alt="Geen Afbeelding" ><br />
							</p>
                        </div>
                    </div>
                </li>
                <li>
                    <img class="inline" src="../../bjc-r/img/icons/talk-with-your-partner.png" alt="Geen Afbeelding"  />
                    What does the result of that expression tell you about the state of the game?
                </li>
                <li>If <code>{1, 2, 3}</code> isn't the triple in which <strong>x</strong> won the game, replace the list in the <code>map</code> expression with the winning triple, and click the expression again.</li>
                <li>
                	Use this idea to make a <img src="../../bjc-r/img/3-lists/status-of-triple.png" alt="Geen Afbeelding" > block that takes one possible winning triple (a triple like <img src="../../bjc-r/img/3-lists/{1,2,3}.png" alt="Geen Afbeelding" >) as input and reports a list of what is in those three positions (X, O, or Empty).
                    <div class="endnote">You learned how to specify the list input type (<img class="inline" src="../../bjc-r/img/3-lists/list_input_slot.png" alt="Geen Afbeelding" >) on <a href="/bjc-r/cur/programming/2-complexity/2-data-structures-art/1-the-for-each-block.html?topic=nyc_bjc%2F2-conditionals-abstraction.topic&course=bjc4nyc.html&novideo&noassignment" >Unit 2 Lab 2 Page 1: Processing Each Item in a List</a>.</div>
                </li>
                <li>
                    <img class="imageRight" src="../../bjc-r/img/icons/save-mini.png" alt="Geen Afbeelding"  />
                    Play another game where player O wins, and test your <code>status of triple</code> block with the winning triple. Fix any bugs.
                </li>
            </ol>
        </div>
        
        <h3>Checking All the Ways to Win</h3>
        <p>You've just built a block that will check one triple to show if either player has chosen all three of those squares. Now, you'll build a block, <code>status of all winning triples</code> to perform the same check for <em>all</em> of the triples that make a win. Then, you'll use that block to check if any of the winning triples actually contain three moves from the same player.</p>
        <p>
        	For example below, Player O has won this game, and the <code>status of all winning triples</code> block contains the status of each triple. The computer can use this block to check for a winning triple that has either all X or all O.<br />
	        <img class="indent noshadow" src="../../bjc-r/img/3-lists/status-of-all-board.png" alt="Geen Afbeelding"  />
	        <img class="indent noshadow" src="../../bjc-r/img/3-lists/status-of-all-reporting.png" alt="Geen Afbeelding"  />
        </p>
        <div class="endnote">The order of your triples and/or the numbering of the positions in your project might be different. This is OK as long as your project works.</div>
        <div class="forYouToDo">
			<ol start="10">
                <li>Use <code>map</code> together with some of the other blocks you have made to build the <code>status of all winning triples</code> block. It should report the status of all of the winning triples as a list of lists, as shown above.</li>
	            <div class="endnote">
                    <a href="#hint-status-all" data-toggle="collapse" >Click for a hint on how to use <code>map</code>.</a>
                    <div id="hint-status-all" class="collapse">When you use <code>map</code> think:
                        <ol>
                            <li>What is the function you are performing? That goes in the gray ring.</li>
                            <li>What data are you performing that function on? That is the list you are mapping over.</li>
                        </ol>
                        Here, you want to know the status of each winning triple.
                    </div>
                </div>
                <div class="sidenoteBig">
                	<a href="#hint-won" data-toggle="collapse" >Click for a hint on building <code>won?</code>.</a>
					<div id="hint-won" class="collapse">
                    	<p>Put it in words: What is it that you want to check?</p>
                        <p>Are there any blocks that might be helpful for that?</p>
                        <p>
                            <a href="#hint-won-contains" data-toggle="collapse" >Click for another hint.</a>
                            <div id="hint-won-contains" class="collapse"><img src="../../bjc-r/img/3-lists/contains.png" alt="Geen Afbeelding"  /></div>
                        </p>
                    </div>
                </div>
                <li>Now make a block <img src="../../bjc-r/img/3-lists/wonQ.png" alt="Geen Afbeelding" > that takes the letter <strong>X</strong> or <strong>O</strong> as input, and reports <code>true</code> if and only if that player has won the game. </li>
                <img class="imageRight" src="../../bjc-r/img/icons/save-mini.png" alt="Geen Afbeelding"  />
                <li>Modify your program so that when a player wins the game, the program <em>notifies</em> the players.</li>
                <li>Play the game a few times to check that it's working, and fix any bugs. Be sure to let each player win at least once.</li>
            </ol>
        </div>
        
        <h3>Checking for Ties</h3>
        <p>The definition of a tie game is that there are no more empty squares and neither player has won.</p>
    
        <div class="forYouToDo">
			<ol start="14">
				<div class="todo">
                    <p>This hint won't work when we change "Empty" to numbers. -bh</p>
                    <p>I don't want to do that until we need it--in U5. --MF, 6/8/18</p>
                    <p>One reason to do it from the beginning is that as it is now, the student has to remember where in the program it assumes &quot;Empty,&quot; otherwise the project won't work. --bh</p>
                </div>
                <li>
                    <div class="sidenoteBig">
                        <a href="#hint-tie-contains" data-toggle="collapse" >Click for a hint about checking for ties.</a>
                        <div id="hint-tie-contains" class="collapse"><img src="../../bjc-r/img/3-lists/contains.png" alt="Geen Afbeelding"  /></div>
					</div>
                    Develop a way to determine if the game has tied, and if so, make the program notify the players.
                </li>
                <li>Play a couple games to test the tie-checking feature, and fix any bugs.</li>
                <div class="sidenoteBig">
                    <p>You can work on this project more in <a href="/bjc-r/cur/programming/5-algorithms/tic-tac-toe/1-review.html?topic=nyc_bjc%2F5-algorithms.topic&course=bjc4nyc.html&novideo&noassignment" >Unit 5 Optional Project: Tic-Tac-Toe</a>.</p>
                </div>
                <li>
                	Why does the order of the tests (for wins vs. for ties) matter?
					<img src="../../bjc-r/img/icons/talk-with-your-partner-mini.png" alt="Geen Afbeelding"  />
				</li>
                <li><img class="inline" src="../../bjc-r/img/icons/save-use-later.png" alt="Geen Afbeelding"  /></li>
			</ol>
		</div>
        
		<div class="ifTime">
			<ol start="18">
				<li>There are many small improvements you could make. For one thing, when a player wins, you might want to prevent any further moves. What else might you want to change or improve?</li>
			</ol>
		</div>

        <div class="takeItFurther">
			<img class="imageRight" src="../../bjc-r/img/icons/tough-stuff-mini.png" alt="Geen Afbeelding"  />
            <ol type="A">
                <li>Your program can be smarter about detecting ties.  If there is only one empty square on the board, and filling that square with the player whose turn is next wouldn't cause a win, then the game is already tied. The challenge here is that you'll have to test for a win on a board that isn't the current <var>board</var>.</li>
                <li>Instead of just having the sprite say something like "X wins," it would be more satisfying to the players if you draw a thick line through the three squares that generate a win. This is a little tricky because by the time you know there's a win, you no longer know which triple triggered it. Make sure your code stays readable to another programmer.</li>
            </ol>
        </div>
        

	</body>
</html>
